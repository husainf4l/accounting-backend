model User {
  id           String    @id @default(uuid())
  email        String    @unique
  password     String
  phoneNumber  String
  userName     String    @unique
  name         String
  fcmToken     String?
  profileImage String    @default("default_image_url")
  role         UserRole  @default(USER)
  companyId    String? // Active company ID
  position     String?
  department   String?
  hireDate     DateTime?
  salary       Float?
  isActive     Boolean   @default(true)
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt
  tenantId     Int?
  invoices     Invoice[]
  receipts     Receipt[]
  company      Company?  @relation(fields: [companyId], references: [id])
  companies    Company[] @relation("UserCompanies")
}

model Company {
  id                String    @id @default(uuid())
  name              String
  address           String?
  whatsAppKey       String?
  phone             String?
  email             String    @unique
  website           String?
  taxNumber         String?   @unique
  logoImage         String
  createdAt         DateTime  @default(now())
  updatedAt         DateTime  @updatedAt
  eInvoiceClientId  String?
  eInvoiceSecretKey String?
  legalName         String?
  eInvoiceLink      String?
  legalId           String?   @unique
  invoices          Invoice[]
  users             User[]    @relation("UserCompanies") // Automatically inferred
  User              User[]
}

model Employee {
  id         String    @id @default(uuid())
  userId     String?   @unique
  position   String?
  department String?
  hireDate   DateTime?
  salary     Float?
  isActive   Boolean   @default(true)
  createdAt  DateTime  @default(now())
  updatedAt  DateTime  @updatedAt
  name       String?
  companyId  String
  invoices   Invoice[]
  receipts   Receipt[]
}

enum UserRole {
  USER
  ADMIN
  SUPERADMIN
}
